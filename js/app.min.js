var app=angular.module("WidgetSpa",["ui.router"]);app.constant("API_URL","http://spa.tglrw.com:4000"),app.run(["$rootScope",function(a){}]),app.config(["$stateProvider","$urlRouterProvider",function(a,b){a.state("dashboard",{url:"/",templateUrl:"partials/dashboard.html",controller:"DashboardCtrl"}).state("users",{url:"/users",templateUrl:"partials/users.html",controller:"UsersCtrl"}).state("users.single",{url:"/users/:id",templateUrl:"partials/users-single.html",controller:"UsersCtrl"}).state("widgets",{url:"/widgets",templateUrl:"partials/widgets.html",controller:"WidgetsCtrl"}).state("widgets.single",{url:"/widgets/:id",templateUrl:"partials/widgets-single.html",controller:"WidgetsCtrl"}),b.otherwise("/")}]),app.factory("_users",["$http","API_URL",function(a,b){var c={};return c.getAllUsers=function(){return a.get(b+"/users").then(function(a){return a.data})},c.getUser=function(c){return a.get(b+"/users/"+c).then(function(a){return a.data})},c}]),app.factory("_widgets",["$http","API_URL",function(a,b){var c={};return c.getAllWidgets=function(){return a.get(b+"/widgets").then(function(a){return a.data})},c.getWidget=function(c){return a.get(b+"/widgets/"+c).then(function(a){return a.data})},c.createWidget=function(c){return a.post(b+"/widgets",c).then(function(a){return a.data})},c.editWidget=function(c,d){return a.put(b+"/widgets/"+c,d).then(function(a){return a.data})},c}]),app.controller("DashboardCtrl",["$scope","_users","_widgets",function(a,b,c){b.getAllUsers().then(function(b){a.users=b}),c.getAllWidgets().then(function(b){a.widgets=b})}]),app.controller("MainCtrl",["$scope",function(a){var b=new Date;a.year=b.getFullYear()}]),app.controller("UsersCtrl",["$scope","_users",function(a,b){b.getAllUsers().then(function(b){a.users=b})}]),app.controller("WidgetsCtrl",["$scope","_widgets",function(a,b){b.getAllWidgets().then(function(b){a.widgets=b})}]),app.directive("listUsers",[function(){return{restrict:"A",templateUrl:"partials/list-users.html",replace:!0,scope:{users:"=listUsers"}}}]),app.directive("listWidgets",[function(){return{restrict:"A",templateUrl:"partials/list-widgets.html",replace:!0,scope:{widgets:"=listWidgets",simpleView:"=simpleView"}}}]);